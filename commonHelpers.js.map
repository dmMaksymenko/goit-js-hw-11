{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const searchForm = document.querySelector('.search-form');\n  const galleryMarkup = document.querySelector('.gallery');\n  const submitBtn = document.querySelector('.search-btn');\n  const loader = document.querySelector('.loader');\n  const GALLERY_LINK = 'gallery-link';\n  let gallery;\n  submitBtn.disabled = true;\n\n  searchForm.elements.query.addEventListener('input', function () {\n    const query = this.value.trim();\n\n    submitBtn.disabled = query === '';\n  });\n\n  searchForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    const query = e.target.elements.query.value.trim();\n    if (query === '') {\n      return;\n    }\n\n    loader.style.display = 'block';\n    galleryMarkup.innerHTML = '';\n    getImage(query)\n      .then(data => {\n        loader.style.display = 'none';\n        renderImgs(data.hits);\n        submitBtn.disabled = true;\n\n        gallery = new SimpleLightbox(`.${GALLERY_LINK}`, {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n        gallery.refresh();\n        gallery.on('show.simplelightbox');\n      })\n      .catch(error => {\n        loader.style.display = 'none';\n        onError(`Error fetching images: ${error}`);\n      });\n\n    e.target.elements.query.value = '';\n  });\n\n  function getImage(query) {\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const searchParams = new URLSearchParams({\n      key: '42137546-386b5be41212ccd429cab5a80',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safeSearch: true,\n    });\n    const Params = `?${searchParams}`;\n    const url = BASE_URL + Params;\n\n    return fetch(url)\n      .then(res => {\n        if (!res.ok) {\n          throw new Error(`Network response was not ok, status: ${res.status}`);\n        }\n        return res.json();\n      })\n      .catch(error => {\n        onError(`Error fetching images: ${error}`);\n        throw error;\n      });\n  }\n\n  function imgTemplate({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) {\n    return `\n  <a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery__figcaption\">\n        <p class=\"image-item\">Likes <span class=\"image-caption\">${likes}</span></p>\n        <p class=\"image-item\">Views <span class=\"image-caption\">${views}</span></p>\n        <p class=\"image-item\">Comments <span class=\"image-caption\">${comments}</span></p>\n        <p class=\"image-item\">Downloads <span class=\"image-caption\">${downloads}</span></p>\n  </figcaption>\n  </figure>\n</a>`;\n  }\n\n  function imgsTemplate(imgs) {\n    return imgs.map(imgTemplate).join('');\n  }\n  function renderImgs(images) {\n    if (images.length === 0) {\n      iziToast.show({\n        icon: 'icon-close',\n        messageSize: '16px',\n        backgroundColor: `red`,\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      submitBtn.disabled = true;\n      return;\n    }\n    const markup = imgsTemplate(images);\n    galleryMarkup.innerHTML = markup;\n  }\n});\n\nfunction onSuccess(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#EF4040',\n    progressBarColor: '#FFE0AC',\n    icon: 'icon-close',\n    ...toastOptions,\n  });\n}\n\nfunction onError(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#59A10D',\n    progressBarColor: '#B5EA7C',\n    icon: 'icon-chek',\n    ...toastOptions,\n  });\n}\n"],"names":["searchForm","galleryMarkup","submitBtn","loader","GALLERY_LINK","gallery","query","e","getImage","data","renderImgs","SimpleLightbox","error","onError","BASE_URL","Params","url","res","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","imgs","images","iziToast","markup","message"],"mappings":"6vBAOA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,eACrB,IAAIC,EACJH,EAAU,SAAW,GAErBF,EAAW,SAAS,MAAM,iBAAiB,QAAS,UAAY,CAC9D,MAAMM,EAAQ,KAAK,MAAM,KAAI,EAE7BJ,EAAU,SAAWI,IAAU,EACnC,CAAG,EAEDN,EAAW,iBAAiB,SAAU,SAAUO,EAAG,CACjDA,EAAE,eAAc,EAChB,MAAMD,EAAQC,EAAE,OAAO,SAAS,MAAM,MAAM,OACxCD,IAAU,KAIdH,EAAO,MAAM,QAAU,QACvBF,EAAc,UAAY,GAC1BO,EAASF,CAAK,EACX,KAAKG,GAAQ,CACZN,EAAO,MAAM,QAAU,OACvBO,EAAWD,EAAK,IAAI,EACpBP,EAAU,SAAW,GAErBG,EAAU,IAAIM,EAAe,IAAIP,CAAY,GAAI,CAC/C,aAAc,MACd,aAAc,GACxB,CAAS,EACDC,EAAQ,QAAO,EACfA,EAAQ,GAAG,qBAAqB,CACxC,CAAO,EACA,MAAMO,GAAS,CACdT,EAAO,MAAM,QAAU,OACvBU,EAAQ,0BAA0BD,CAAK,EAAE,CACjD,CAAO,EAEHL,EAAE,OAAO,SAAS,MAAM,MAAQ,GACpC,CAAG,EAED,SAASC,EAASF,EAAO,CACvB,MAAMQ,EAAW,2BASXC,EAAS,IAPM,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGT,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAClB,CAAK,CAC8B,GACzBU,EAAMF,EAAWC,EAEvB,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,wCAAwCA,EAAI,MAAM,EAAE,EAEtE,OAAOA,EAAI,MACnB,CAAO,EACA,MAAML,GAAS,CACd,MAAAC,EAAQ,0BAA0BD,CAAK,EAAE,EACnCA,CACd,CAAO,CACJ,CAED,SAASM,EAAY,CACnB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACJ,EAAK,CACD,MAAO;AAAA,aACEL,CAAa,YAAYhB,CAAY;AAAA;AAAA,kBAEhCe,CAAY,UAAUE,CAAI;AAAA;AAAA,kEAEsBC,CAAK;AAAA,kEACLC,CAAK;AAAA,qEACFC,CAAQ;AAAA,sEACPC,CAAS;AAAA;AAAA;AAAA,KAI5E,CAED,SAASC,EAAaC,EAAM,CAC1B,OAAOA,EAAK,IAAIT,CAAW,EAAE,KAAK,EAAE,CACrC,CACD,SAASR,EAAWkB,EAAQ,CAC1B,GAAIA,EAAO,SAAW,EAAG,CACvBC,EAAS,KAAK,CACZ,KAAM,aACN,YAAa,OACb,gBAAiB,MACjB,SAAU,WACV,QACE,0EACV,CAAO,EACD3B,EAAU,SAAW,GACrB,MACD,CACD,MAAM4B,EAASJ,EAAaE,CAAM,EAClC3B,EAAc,UAAY6B,CAC3B,CACH,CAAC,EAYD,SAASjB,EAAQkB,EAAS,CACxBF,EAAS,KAAK,CACZ,QAAAE,EACA,gBAAiB,UACjB,iBAAkB,UAClB,KAAM,YACN,GAAG,YACP,CAAG,CACH"}