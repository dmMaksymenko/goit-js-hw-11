{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst searchForm = document.querySelector('.search-form');\nconst galleryMarkup = document.querySelector('.gallery');\nconst GALLERY_LINK = 'gallery-link';\nlet gallery;\n\nsearchForm.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const query = e.target.elements.query.value.trim();\n  console.log(query);\n  if (query === '') return;\n  getImage(query).then(data => {\n    console.log(data);\n    renderImgs(data.hits);\n\n    gallery = new SimpleLightbox(`.${GALLERY_LINK}`, {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    gallery.refresh();\n    gallery.on('show.simplelightbox');\n  });\n\n  galleryMarkup.innerHTML = '';\n  e.target.elements.query.value = '';\n});\n\nfunction getImage(query) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const searchParams = new URLSearchParams({\n    key: '42137546-386b5be41212ccd429cab5a80',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n  });\n  const Params = `?${searchParams}`;\n  const url = BASE_URL + Params;\n\n  return fetch(url)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(`Network response was not ok, status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .catch(error => {\n      console.error(`${error}`);\n      throw error;\n    });\n}\n\nfunction imgTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n     <figure>\n      <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n      <figcaption class=\"gallery__figcaption\">\n        <p class=\"image-item\">Likes <span class=\"image-caption\">${likes}</span></p>\n        <p class=\"image-item\">Views <span class=\"image-caption\">${views}</span></p>\n        <p class=\"image-item\">Comments <span class=\"image-caption\">${comments}</span></p>\n        <p class=\"image-item\">Downloads <span class=\"image-caption\">${downloads}</span></p>\n  </figcaption>\n  </figure>\n</a>`;\n}\n\nfunction imgsTemplate(imgs) {\n  return imgs.map(imgTemplate).join('');\n}\nfunction renderImgs(images) {\n  if (images.length === 0) {\n    iziToast.show({\n      icon: 'icon-close',\n      messageSize: '16px',\n      backgroundColor: `red`,\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    return;\n  }\n  const markup = imgsTemplate(images);\n  galleryMarkup.innerHTML = markup;\n}\n"],"names":["searchForm","galleryMarkup","GALLERY_LINK","gallery","e","query","getImage","data","renderImgs","SimpleLightbox","BASE_URL","Params","url","res","error","imgTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imgsTemplate","imgs","images","iziToast","markup"],"mappings":"6vBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAe,eACrB,IAAIC,EAEJH,EAAW,iBAAiB,SAAU,SAAUI,EAAG,CACjDA,EAAE,eAAc,EAChB,MAAMC,EAAQD,EAAE,OAAO,SAAS,MAAM,MAAM,OAC5C,QAAQ,IAAIC,CAAK,EACbA,IAAU,KACdC,EAASD,CAAK,EAAE,KAAKE,GAAQ,CAC3B,QAAQ,IAAIA,CAAI,EAChBC,EAAWD,EAAK,IAAI,EAEpBJ,EAAU,IAAIM,EAAe,IAAIP,CAAY,GAAI,CAC/C,aAAc,MACd,aAAc,GACpB,CAAK,EACDC,EAAQ,QAAO,EACfA,EAAQ,GAAG,qBAAqB,CACpC,CAAG,EAEDF,EAAc,UAAY,GAC1BG,EAAE,OAAO,SAAS,MAAM,MAAQ,GAClC,CAAC,EAED,SAASE,EAASD,EAAO,CACvB,MAAMK,EAAW,2BASXC,EAAS,IAPM,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGN,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CAC8B,GACzBO,EAAMF,EAAWC,EAEvB,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,wCAAwCA,EAAI,MAAM,EAAE,EAEtE,OAAOA,EAAI,MACjB,CAAK,EACA,MAAMC,GAAS,CACd,cAAQ,MAAM,GAAGA,CAAK,EAAE,EAClBA,CACZ,CAAK,CACL,CAEA,SAASC,EAAY,CACnB,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,aACIL,CAAa,YAAYf,CAAY;AAAA;AAAA,kBAEhCc,CAAY,UAAUE,CAAI;AAAA;AAAA,kEAEsBC,CAAK;AAAA,kEACLC,CAAK;AAAA,qEACFC,CAAQ;AAAA,sEACPC,CAAS;AAAA;AAAA;AAAA,KAI/E,CAEA,SAASC,EAAaC,EAAM,CAC1B,OAAOA,EAAK,IAAIT,CAAW,EAAE,KAAK,EAAE,CACtC,CACA,SAASP,EAAWiB,EAAQ,CAC1B,GAAIA,EAAO,SAAW,EAAG,CACvBC,EAAS,KAAK,CACZ,KAAM,aACN,YAAa,OACb,gBAAiB,MACjB,SAAU,WACV,QACE,0EACR,CAAK,EACD,MACD,CACD,MAAMC,EAASJ,EAAaE,CAAM,EAClCxB,EAAc,UAAY0B,CAC5B"}